{"version":3,"file":"errors.js","sourceRoot":"","sources":["../../src/errors.ts"],"names":[],"mappings":"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","sourcesContent":["import type { Idl } from \"@coral-xyz/anchor\";\r\nimport type { PublicKey, SendTransactionError } from \"@solana/web3.js\";\r\n\r\nimport {\r\n  REWARD_DISTRIBUTOR_ADDRESS,\r\n  REWARD_DISTRIBUTOR_IDL,\r\n} from \"./programs/rewardDistributor\";\r\nimport { STAKE_POOL_ADDRESS, STAKE_POOL_IDL } from \"./programs/stakePool\";\r\n\r\ntype ErrorCode = {\r\n  code: string;\r\n  message: string;\r\n};\r\n\r\nexport const NATIVE_ERRORS: ErrorCode[] = [\r\n  {\r\n    code: \"WalletSignTransactionError\",\r\n    message: \"User rejected the request.\",\r\n  },\r\n  {\r\n    code: \"failed to get recent blockhash\",\r\n    message:\r\n      \"Solana is experiencing degrading performance. You transaction failed to execute.\",\r\n  },\r\n  {\r\n    code: \"Blockhash not found\",\r\n    message:\r\n      \"Solana is experiencing degrading performance. Transaction may or may not have gone through.\",\r\n  },\r\n  {\r\n    code: \"Transaction was not confirmed in\",\r\n    message:\r\n      \"Transaction timed out waiting on confirmation from Solana. It may or may not have gone through.\",\r\n  },\r\n  {\r\n    code: \"Attempt to debit an account but found no record of a prior credit\",\r\n    message: \"Wallet has never had any sol before. Try adding sol first.\",\r\n  },\r\n  {\r\n    code: \"Provided owner is not allowed\",\r\n    message: \"Token account is already created for this user\",\r\n  },\r\n  {\r\n    code: \"not associated with\",\r\n    message: \"Account not associated with this mint\",\r\n  },\r\n  {\r\n    code: \"rent-exempt\",\r\n    message:\r\n      \"Insufficient funds. User does not have enough sol to complete the transaction\",\r\n  },\r\n  // token program errors\r\n  {\r\n    code: \"insufficient funds\",\r\n    message:\r\n      \"Insufficient funds. User does not have enough balance of token to complete the transaction\",\r\n  },\r\n  // token program errors\r\n  {\r\n    code: \"0x1\",\r\n    message:\r\n      \"Insufficient funds. User does not have enough balance of token to complete the transaction\",\r\n  },\r\n  {\r\n    code: \"0x4\",\r\n    message:\r\n      \"Invalid owner. The user is likely not mint authority of this token.\",\r\n  },\r\n  {\r\n    code: \"91\",\r\n    message: \"Token is not ellgible for original receipts\",\r\n  },\r\n  // anchor errors\r\n  {\r\n    code: \"100\",\r\n    message: \"InstructionMissing: 8 byte instruction identifier not provided\",\r\n  },\r\n  {\r\n    code: \"101\",\r\n    message:\r\n      \"InstructionFallbackNotFound: Fallback functions are not supported\",\r\n  },\r\n  {\r\n    code: \"102\",\r\n    message:\r\n      \"InstructionDidNotDeserialize: The program could not deserialize the given instruction\",\r\n  },\r\n  {\r\n    code: \"103\",\r\n    message:\r\n      \"InstructionDidNotSerialize: The program could not serialize the given instruction\",\r\n  },\r\n  {\r\n    code: \"1000\",\r\n    message:\r\n      \"IdlInstructionStub: The program was compiled without idl instructions\",\r\n  },\r\n  {\r\n    code: \"1001\",\r\n    message:\r\n      \"IdlInstructionInvalidProgram: Invalid program given to the IDL instruction\",\r\n  },\r\n  { code: \"2000\", message: \"ConstraintMut: A mut constraint was violated\" },\r\n  {\r\n    code: \"2001\",\r\n    message: \"ConstraintHasOne: A has one constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2002\",\r\n    message: \"ConstraintSigner: A signer constraint as violated\",\r\n  },\r\n  { code: \"2003\", message: \"ConstraintRaw: A raw constraint was violated\" },\r\n  {\r\n    code: \"2004\",\r\n    message: \"ConstraintOwner: An owner constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2005\",\r\n    message: \"ConstraintRentExempt: A rent exemption constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2006\",\r\n    message: \"ConstraintSeeds: A seeds constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2007\",\r\n    message: \"ConstraintExecutable: An executable constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2008\",\r\n    message: \"ConstraintState: A state constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2009\",\r\n    message: \"ConstraintAssociated: An associated constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2010\",\r\n    message:\r\n      \"ConstraintAssociatedInit: An associated init constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2011\",\r\n    message: \"ConstraintClose: A close constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2012\",\r\n    message: \"ConstraintAddress: An address constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2013\",\r\n    message: \"ConstraintZero: Expected zero account discriminant\",\r\n  },\r\n  {\r\n    code: \"2014\",\r\n    message: \"ConstraintTokenMint: A token mint constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2015\",\r\n    message: \"ConstraintTokenOwner: A token owner constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2016\",\r\n    message:\r\n      \"ConstraintMintMintAuthority: A mint mint authority constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2017\",\r\n    message:\r\n      \"ConstraintMintFreezeAuthority: A mint freeze authority constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2018\",\r\n    message: \"ConstraintMintDecimals: A mint decimals constraint was violated\",\r\n  },\r\n  {\r\n    code: \"2019\",\r\n    message: \"ConstraintSpace: A space constraint was violated\",\r\n  },\r\n  {\r\n    code: \"3000\",\r\n    message:\r\n      \"AccountDiscriminatorAlreadySet: The account discriminator was already set on this account\",\r\n  },\r\n  {\r\n    code: \"3001\",\r\n    message:\r\n      \"AccountDiscriminatorNotFound: No 8 byte discriminator was found on the account\",\r\n  },\r\n  {\r\n    code: \"3002\",\r\n    message:\r\n      \"AccountDiscriminatorMismatch: 8 byte discriminator did not match what was expected\",\r\n  },\r\n  {\r\n    code: \"3003\",\r\n    message: \"AccountDidNotDeserialize: Failed to deserialize the account\",\r\n  },\r\n  {\r\n    code: \"3004\",\r\n    message: \"AccountDidNotSerialize: Failed to serialize the account\",\r\n  },\r\n  {\r\n    code: \"3005\",\r\n    message:\r\n      \"AccountNotEnoughKeys: Not enough account keys given to the instruction\",\r\n  },\r\n  {\r\n    code: \"3006\",\r\n    message: \"AccountNotMutable: The given account is not mutable\",\r\n  },\r\n  {\r\n    code: \"3007\",\r\n    message:\r\n      \"AccountNotProgramOwned: The given account is not owned by the executing program\",\r\n  },\r\n  {\r\n    code: \"3008\",\r\n    message: \"InvalidProgramId: Program ID was not as expected\",\r\n  },\r\n  {\r\n    code: \"3009\",\r\n    message: \"InvalidProgramExecutable: Program account is not executable\",\r\n  },\r\n  {\r\n    code: \"3010\",\r\n    message: \"AccountNotSigner: The given account did not sign\",\r\n  },\r\n  {\r\n    code: \"3011\",\r\n    message:\r\n      \"AccountNotSystemOwned: The given account is not owned by the system program\",\r\n  },\r\n  {\r\n    code: \"3012\",\r\n    message:\r\n      \"AccountNotInitialized: The program expected this account to be already initialized\",\r\n  },\r\n  {\r\n    code: \"3013\",\r\n    message:\r\n      \"AccountNotProgramData: The given account is not a program data account\",\r\n  },\r\n  {\r\n    code: \"3014\",\r\n    message:\r\n      \"AccountNotAssociatedTokenAccount: The given account is not the associated token account\",\r\n  },\r\n  {\r\n    code: \"4000\",\r\n    message:\r\n      \"StateInvalidAddress: The given state account does not have the correct address\",\r\n  },\r\n  {\r\n    code: \"5000\",\r\n    message:\r\n      \"Deprecated: The API being used is deprecated and should no longer be used\",\r\n  },\r\n].reverse();\r\n\r\nexport type ErrorOptions = {\r\n  /** ProgramIdls in priority order */\r\n  programIdls?: { idl: Idl; programId: PublicKey }[];\r\n  /** Additional errors by code */\r\n  additionalErrors?: ErrorCode[];\r\n};\r\n\r\nexport const handleError = (\r\n  e: any,\r\n  fallBackMessage = \"Transaction failed\",\r\n  // programIdls in priority order\r\n  options: ErrorOptions = {\r\n    programIdls: [\r\n      { programId: STAKE_POOL_ADDRESS, idl: STAKE_POOL_IDL },\r\n      { programId: REWARD_DISTRIBUTOR_ADDRESS, idl: REWARD_DISTRIBUTOR_IDL },\r\n    ],\r\n    additionalErrors: NATIVE_ERRORS,\r\n  }\r\n): string => {\r\n  const programIdls = options.programIdls ?? [];\r\n  const additionalErrors = options.additionalErrors ?? [];\r\n  const hex = (e as SendTransactionError)?.message?.split(\" \").at(-1);\r\n  const dec = parseInt(hex || \"\", 16);\r\n  const logs =\r\n    (e as SendTransactionError)?.logs ?? [\r\n      (e as SendTransactionError)?.message,\r\n    ] ?? [(e as Error).toString()] ??\r\n    [];\r\n\r\n  const matchedErrors: { programMatch?: boolean; errorMatch?: string }[] = [\r\n    ...[\r\n      ...programIdls.map(({ idl, programId }) => ({\r\n        // match program on any log that includes programId and 'failed'\r\n        programMatch: logs?.some(\r\n          (l) => l?.includes(programId.toString()) && l.includes(\"failed\")\r\n        ),\r\n        // match error with decimal\r\n        errorMatch: idl.errors?.find((err) => err.code === dec)?.msg,\r\n      })),\r\n      {\r\n        // match native error with decimal\r\n        errorMatch: additionalErrors.find((err) => err.code === dec.toString())\r\n          ?.message,\r\n      },\r\n    ],\r\n    ...[\r\n      {\r\n        programMatch: true,\r\n        errorMatch: additionalErrors.find(\r\n          (err) =>\r\n            // message includes error\r\n            (e as SendTransactionError)?.message?.includes(err.code) ||\r\n            // toString includes error\r\n            (e as Error).toString().includes(err.code) ||\r\n            // any log includes error\r\n            (e as SendTransactionError)?.logs?.some((l) =>\r\n              l.toString().includes(err.code)\r\n            )\r\n        )?.message,\r\n      },\r\n      ...programIdls.map(({ idl, programId }) => ({\r\n        // match program on any log that includes programId and 'failed'\r\n        programMatch: logs?.some(\r\n          (l) => l?.includes(programId.toString()) && l.includes(\"failed\")\r\n        ),\r\n        errorMatch: idl.errors?.find(\r\n          (err) =>\r\n            // message includes error\r\n            (e as SendTransactionError)?.message?.includes(\r\n              err.code.toString()\r\n            ) ||\r\n            // toString includes error\r\n            (e as Error).toString().includes(err.code.toString()) ||\r\n            // any log includes error\r\n            (e as SendTransactionError)?.logs?.some((l) =>\r\n              l.toString().includes(err.code.toString())\r\n            )\r\n        )?.msg,\r\n      })),\r\n    ],\r\n  ];\r\n\r\n  return (\r\n    matchedErrors.find((e) => e.programMatch && e.errorMatch)?.errorMatch ||\r\n    matchedErrors.find((e) => e.errorMatch)?.errorMatch ||\r\n    fallBackMessage\r\n  );\r\n};\r\n"]}